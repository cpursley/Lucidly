<h2>Manage your Dreams</h2>   
    
<p><%= link_to 'Record a new dream', new_dream_path %></p>

<section id="mydream">
        
    <% if !@mydreams.empty? %>
    
        <% @mydreams.each do |dream| %>
    
            <dream class="mydream">
        
                <div class="title"><%= dream.title %></div>
                <div class="created">
                    Created / Last updated: <%= dream.created_at.strftime("%B %d, %Y") %> / <%= dream.updated_at.strftime("%B %d, %Y") %>
                </div>
                        
                <!-- states:  0...private - 1...published -->                                
                        
                <% if dream.state == 0 %>     
                  <div class="state">Current status: Private (visible via direct link)</div>
                <% end%>
            
                <% if dream.state == 1 %>     
                  <div class="state">Current status: Published (<%= dream.submitted.strftime("%B %d, %Y") %>)</div>
                <% end %>
    
                <div class="actions">
                    <span class="show"><%= link_to 'View', dream %></span>
                    <span class="edit"><%= link_to 'Edit', edit_dream_path(dream) %></span>
                    <% if (dream.state == 0) or (dream.state == 2) %>
                        <span><%= link_to "Publish", "#" %></span>
                        <span class="delete"><%= link_to 'Delete', dream, :confirm => 'Are you sure?', :method => :delete %></span>
                    <% end %>
                    <% if dream.state == 1 %>
                        <span><%= link_to "Unpublish", "#" %></span>
                        <span class="delete"><%= link_to 'Delete', dream, :confirm => 'Are you sure?', :method => :delete %></span>
                    <% end %>
                </div>
                
            </dream>  
        <% end %>

    <% else %>
        <p>You have not recorded any dreams yet. Start to contribute: <%= link_to 'New Dream', new_dream_path %> %></p>
    <% end %>

</section>